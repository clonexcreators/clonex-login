import{c as e}from"../vendor/vendor-react-BvdKT-Sw.js";import{e as t,d as n,f as a}from"../vendor/vendor-web3-oAvc8dMH.js";const s=e=>e.toString(16).padStart(2,"0");class i{}var r,o,c;i.makeRequest=(e,t)=>({id:"undefined"!=typeof window?(()=>{const e=new Uint8Array(5);return window.crypto.getRandomValues(e),Array.from(e,s).join("")})():(new Date).getTime().toString(36),method:e,params:t,env:{sdkVersion:"9.1.0"}}),i.makeResponse=(e,t,n)=>({id:e,success:!0,version:n,data:t}),i.makeErrorResponse=(e,t,n)=>({id:e,success:!1,error:t,version:n}),(o=r||(r={})).sendTransactions="sendTransactions",o.rpcCall="rpcCall",o.getChainInfo="getChainInfo",o.getSafeInfo="getSafeInfo",o.getTxBySafeTxHash="getTxBySafeTxHash",o.getSafeBalances="getSafeBalances",o.signMessage="signMessage",o.signTypedMessage="signTypedMessage",o.getEnvironmentInfo="getEnvironmentInfo",o.getOffChainSignature="getOffChainSignature",o.requestAddressBook="requestAddressBook",o.wallet_getPermissions="wallet_getPermissions",o.wallet_requestPermissions="wallet_requestPermissions",(c||(c={})).requestAddressBook="requestAddressBook";class d{constructor(e=null,t=!1){this.allowedOrigins=null,this.callbacks=new Map,this.debugMode=!1,this.isServer="undefined"==typeof window,this.isValidMessage=({origin:e,data:t,source:n})=>{const a=!t,s=!this.isServer&&n===window.parent,i=void 0!==t.version&&parseInt(t.version.split(".")[0]),r="number"==typeof i&&i>=1;let o=!0;return Array.isArray(this.allowedOrigins)&&(o=void 0!==this.allowedOrigins.find(t=>t.test(e))),!a&&s&&r&&o},this.logIncomingMessage=e=>{},this.onParentMessage=e=>{this.isValidMessage(e)&&(this.debugMode&&this.logIncomingMessage(e),this.handleIncomingMessage(e.data))},this.handleIncomingMessage=e=>{const{id:t}=e,n=this.callbacks.get(t);n&&(n(e),this.callbacks.delete(t))},this.send=(e,t)=>{const n=i.makeRequest(e,t);if(this.isServer)throw new Error("Window doesn't exist");return window.parent.postMessage(n,"*"),new Promise((e,t)=>{this.callbacks.set(n.id,n=>{n.success?e(n):t(new Error(n.error))})})},this.allowedOrigins=e,this.debugMode=t,this.isServer||window.addEventListener("message",this.onParentMessage)}}const u=e=>"object"==typeof e&&null!=e&&"domain"in e&&"types"in e&&"message"in e;var l={},h={},f={},g=e&&e.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(s,i){function r(e){try{c(a.next(e))}catch(t){i(t)}}function o(e){try{c(a.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,o)}c((a=a.apply(e,t||[])).next())})};Object.defineProperty(f,"__esModule",{value:!0}),f.insertParams=function(e,t){return t?Object.keys(t).reduce((e,n)=>function(e,t,n){return e.replace(new RegExp(`\\{${t}\\}`,"g"),n)}(e,n,String(t[n])),e):e},f.stringifyQuery=function(e){if(!e)return"";const t=new URLSearchParams;Object.keys(e).forEach(n=>{null!=e[n]&&t.append(n,String(e[n]))});const n=t.toString();return n?`?${n}`:""},f.fetchData=function(e,t,n,a,s){return g(this,void 0,void 0,function*(){const i=Object.assign({"Content-Type":"application/json"},a),r={method:null!=t?t:"POST",headers:i};return s&&(r.credentials=s),null!=n&&(r.body="string"==typeof n?n:JSON.stringify(n)),E(yield fetch(e,r))})},f.getData=function(e,t,n){return g(this,void 0,void 0,function*(){const a={method:"GET"};return t&&(a.headers=Object.assign(Object.assign({},t),{"Content-Type":"application/json"})),n&&(a.credentials=n),E(yield fetch(e,a))})};const p=e=>"object"==typeof e&&null!==e&&("code"in e||"statusCode"in e)&&"message"in e;function E(e){return g(this,void 0,void 0,function*(){var t;let n;try{n=yield e.json()}catch(a){n={}}if(!e.ok){const a=p(n)?`CGW error - ${null!==(t=n.code)&&void 0!==t?t:n.statusCode}: ${n.message}`:`CGW error - status ${e.statusText}`;throw new Error(a)}return n})}Object.defineProperty(h,"__esModule",{value:!0}),h.postEndpoint=function(e,t,n){const a=I(e,t,null==n?void 0:n.path,null==n?void 0:n.query);return(0,T.fetchData)(a,"POST",null==n?void 0:n.body,null==n?void 0:n.headers,null==n?void 0:n.credentials)},h.putEndpoint=function(e,t,n){const a=I(e,t,null==n?void 0:n.path,null==n?void 0:n.query);return(0,T.fetchData)(a,"PUT",null==n?void 0:n.body,null==n?void 0:n.headers,null==n?void 0:n.credentials)},h.deleteEndpoint=function(e,t,n){const a=I(e,t,null==n?void 0:n.path,null==n?void 0:n.query);return(0,T.fetchData)(a,"DELETE",null==n?void 0:n.body,null==n?void 0:n.headers,null==n?void 0:n.credentials)},h.getEndpoint=function(e,t,n,a){if(a)return(0,T.getData)(a,void 0,null==n?void 0:n.credentials);const s=I(e,t,null==n?void 0:n.path,null==n?void 0:n.query);return(0,T.getData)(s,null==n?void 0:n.headers,null==n?void 0:n.credentials)};const T=f;function I(e,t,n,a){return`${e}${(0,T.insertParams)(t,n)}${(0,T.stringifyQuery)(a)}`}var _={};Object.defineProperty(_,"__esModule",{value:!0}),_.DEFAULT_BASE_URL=void 0,_.DEFAULT_BASE_URL="https://safe-client.safe.global";var y,A,m={};Object.defineProperty(m,"__esModule",{value:!0}),m.ImplementationVersionState=void 0,(A=y||(m.ImplementationVersionState=y={})).UP_TO_DATE="UP_TO_DATE",A.OUTDATED="OUTDATED",A.UNKNOWN="UNKNOWN";var S,N,v,O,b,C={};Object.defineProperty(C,"__esModule",{value:!0}),C.SafeAppSocialPlatforms=C.SafeAppFeatures=C.SafeAppAccessPolicyTypes=void 0,(N=S||(C.SafeAppAccessPolicyTypes=S={})).NoRestrictions="NO_RESTRICTIONS",N.DomainAllowlist="DOMAIN_ALLOWLIST",(v||(C.SafeAppFeatures=v={})).BATCHED_TRANSACTIONS="BATCHED_TRANSACTIONS",(b=O||(C.SafeAppSocialPlatforms=O={})).TWITTER="TWITTER",b.GITHUB="GITHUB",b.DISCORD="DISCORD",b.TELEGRAM="TELEGRAM";var R,D,P,w,M,L,B,G,U,H,k,j,q,W,x,V,K,F,X,$,Q,Y,z,J,Z={};Object.defineProperty(Z,"__esModule",{value:!0}),Z.LabelValue=Z.StartTimeValue=Z.DurationType=Z.DetailedExecutionInfoType=Z.TransactionListItemType=Z.ConflictType=Z.TransactionInfoType=Z.SettingsInfoType=Z.TransactionTokenType=Z.TransferDirection=Z.TransactionStatus=Z.Operation=void 0,(D=R||(Z.Operation=R={}))[D.CALL=0]="CALL",D[D.DELEGATE=1]="DELEGATE",(w=P||(Z.TransactionStatus=P={})).AWAITING_CONFIRMATIONS="AWAITING_CONFIRMATIONS",w.AWAITING_EXECUTION="AWAITING_EXECUTION",w.CANCELLED="CANCELLED",w.FAILED="FAILED",w.SUCCESS="SUCCESS",(L=M||(Z.TransferDirection=M={})).INCOMING="INCOMING",L.OUTGOING="OUTGOING",L.UNKNOWN="UNKNOWN",(G=B||(Z.TransactionTokenType=B={})).ERC20="ERC20",G.ERC721="ERC721",G.NATIVE_COIN="NATIVE_COIN",(H=U||(Z.SettingsInfoType=U={})).SET_FALLBACK_HANDLER="SET_FALLBACK_HANDLER",H.ADD_OWNER="ADD_OWNER",H.REMOVE_OWNER="REMOVE_OWNER",H.SWAP_OWNER="SWAP_OWNER",H.CHANGE_THRESHOLD="CHANGE_THRESHOLD",H.CHANGE_IMPLEMENTATION="CHANGE_IMPLEMENTATION",H.ENABLE_MODULE="ENABLE_MODULE",H.DISABLE_MODULE="DISABLE_MODULE",H.SET_GUARD="SET_GUARD",H.DELETE_GUARD="DELETE_GUARD",(j=k||(Z.TransactionInfoType=k={})).TRANSFER="Transfer",j.SETTINGS_CHANGE="SettingsChange",j.CUSTOM="Custom",j.CREATION="Creation",j.SWAP_ORDER="SwapOrder",j.TWAP_ORDER="TwapOrder",j.SWAP_TRANSFER="SwapTransfer",j.NATIVE_STAKING_DEPOSIT="NativeStakingDeposit",j.NATIVE_STAKING_VALIDATORS_EXIT="NativeStakingValidatorsExit",j.NATIVE_STAKING_WITHDRAW="NativeStakingWithdraw",(W=q||(Z.ConflictType=q={})).NONE="None",W.HAS_NEXT="HasNext",W.END="End",(V=x||(Z.TransactionListItemType=x={})).TRANSACTION="TRANSACTION",V.LABEL="LABEL",V.CONFLICT_HEADER="CONFLICT_HEADER",V.DATE_LABEL="DATE_LABEL",(F=K||(Z.DetailedExecutionInfoType=K={})).MULTISIG="MULTISIG",F.MODULE="MODULE",($=X||(Z.DurationType=X={})).AUTO="AUTO",$.LIMIT_DURATION="LIMIT_DURATION",(Y=Q||(Z.StartTimeValue=Q={})).AT_MINING_TIME="AT_MINING_TIME",Y.AT_EPOCH="AT_EPOCH",(J=z||(Z.LabelValue=z={})).Queued="Queued",J.Next="Next";var ee,te,ne,ae,se,ie,re={};Object.defineProperty(re,"__esModule",{value:!0}),re.FEATURES=re.GAS_PRICE_TYPE=re.RPC_AUTHENTICATION=void 0,(te=ee||(re.RPC_AUTHENTICATION=ee={})).API_KEY_PATH="API_KEY_PATH",te.NO_AUTHENTICATION="NO_AUTHENTICATION",te.UNKNOWN="UNKNOWN",(ae=ne||(re.GAS_PRICE_TYPE=ne={})).ORACLE="ORACLE",ae.FIXED="FIXED",ae.FIXED_1559="FIXED1559",ae.UNKNOWN="UNKNOWN",(ie=se||(re.FEATURES=se={})).ERC721="ERC721",ie.SAFE_APPS="SAFE_APPS",ie.CONTRACT_INTERACTION="CONTRACT_INTERACTION",ie.DOMAIN_LOOKUP="DOMAIN_LOOKUP",ie.SPENDING_LIMIT="SPENDING_LIMIT",ie.EIP1559="EIP1559",ie.SAFE_TX_GAS_OPTIONAL="SAFE_TX_GAS_OPTIONAL",ie.TX_SIMULATION="TX_SIMULATION",ie.EIP1271="EIP1271";var oe,ce,de={};Object.defineProperty(de,"__esModule",{value:!0}),de.TokenType=void 0,(ce=oe||(de.TokenType=oe={})).ERC20="ERC20",ce.ERC721="ERC721",ce.NATIVE_TOKEN="NATIVE_TOKEN",ce.UNKNOWN="UNKNOWN";var ue={};Object.defineProperty(ue,"__esModule",{value:!0});var le,he,fe,ge,pe={};Object.defineProperty(pe,"__esModule",{value:!0}),pe.NativeStakingStatus=pe.ConfirmationViewTypes=void 0,(he=le||(pe.ConfirmationViewTypes=le={})).GENERIC="GENERIC",he.COW_SWAP_ORDER="COW_SWAP_ORDER",he.COW_SWAP_TWAP_ORDER="COW_SWAP_TWAP_ORDER",he.KILN_NATIVE_STAKING_DEPOSIT="KILN_NATIVE_STAKING_DEPOSIT",he.KILN_NATIVE_STAKING_VALIDATORS_EXIT="KILN_NATIVE_STAKING_VALIDATORS_EXIT",he.KILN_NATIVE_STAKING_WITHDRAW="KILN_NATIVE_STAKING_WITHDRAW",(ge=fe||(pe.NativeStakingStatus=fe={})).NOT_STAKED="NOT_STAKED",ge.ACTIVATING="ACTIVATING",ge.DEPOSIT_IN_PROGRESS="DEPOSIT_IN_PROGRESS",ge.ACTIVE="ACTIVE",ge.EXIT_REQUESTED="EXIT_REQUESTED",ge.EXITING="EXITING",ge.EXITED="EXITED",ge.SLASHED="SLASHED";var Ee,Te,Ie,_e,ye={};Object.defineProperty(ye,"__esModule",{value:!0}),ye.SafeMessageStatus=ye.SafeMessageListItemType=void 0,(Te=Ee||(ye.SafeMessageListItemType=Ee={})).DATE_LABEL="DATE_LABEL",Te.MESSAGE="MESSAGE",(_e=Ie||(ye.SafeMessageStatus=Ie={})).NEEDS_CONFIRMATION="NEEDS_CONFIRMATION",_e.CONFIRMED="CONFIRMED";var Ae,me,Se={};Object.defineProperty(Se,"__esModule",{value:!0}),Se.DeviceType=void 0,(me=Ae||(Se.DeviceType=Ae={})).ANDROID="ANDROID",me.IOS="IOS",me.WEB="WEB";var Ne={};Object.defineProperty(Ne,"__esModule",{value:!0}),function(t){var n=e&&e.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,s)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),a=e&&e.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||n(t,e,a)};Object.defineProperty(t,"__esModule",{value:!0}),t.setBaseUrl=void 0,t.relayTransaction=function(e,t){return(0,s.postEndpoint)(r,"/v1/chains/{chainId}/relay",{path:{chainId:e},body:t})},t.getRelayCount=function(e,t){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/relay/{address}",{path:{chainId:e,address:t}})},t.getSafeInfo=function(e,t){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{address}",{path:{chainId:e,address:t}})},t.getIncomingTransfers=function(e,t,n,a){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{address}/incoming-transfers/",{path:{chainId:e,address:t},query:n},a)},t.getModuleTransactions=function(e,t,n,a){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{address}/module-transactions/",{path:{chainId:e,address:t},query:n},a)},t.getMultisigTransactions=function(e,t,n,a){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{address}/multisig-transactions/",{path:{chainId:e,address:t},query:n},a)},t.getBalances=function(e,t,n="usd",a={}){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{address}/balances/{currency}",{path:{chainId:e,address:t,currency:n},query:a})},t.getFiatCurrencies=function(){return(0,s.getEndpoint)(r,"/v1/balances/supported-fiat-codes")},t.getOwnedSafes=function(e,t){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/owners/{address}/safes",{path:{chainId:e,address:t}})},t.getAllOwnedSafes=function(e){return(0,s.getEndpoint)(r,"/v1/owners/{address}/safes",{path:{address:e}})},t.getCollectibles=function(e,t,n={}){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:e,address:t},query:n})},t.getCollectiblesPage=function(e,t,n={},a){return(0,s.getEndpoint)(r,"/v2/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:e,address:t},query:n},a)},t.getTransactionHistory=function(e,t,n={},a){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/transactions/history",{path:{chainId:e,safe_address:t},query:n},a)},t.getTransactionQueue=function(e,t,n={},a){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/transactions/queued",{path:{chainId:e,safe_address:t},query:n},a)},t.getTransactionDetails=function(e,t){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/transactions/{transactionId}",{path:{chainId:e,transactionId:t}})},t.deleteTransaction=function(e,t,n){return(0,s.deleteEndpoint)(r,"/v1/chains/{chainId}/transactions/{safeTxHash}",{path:{chainId:e,safeTxHash:t},body:{signature:n}})},t.postSafeGasEstimation=function(e,t,n){return(0,s.postEndpoint)(r,"/v2/chains/{chainId}/safes/{safe_address}/multisig-transactions/estimations",{path:{chainId:e,safe_address:t},body:n})},t.getNonces=function(e,t){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/nonces",{path:{chainId:e,safe_address:t}})},t.proposeTransaction=function(e,t,n){return(0,s.postEndpoint)(r,"/v1/chains/{chainId}/transactions/{safe_address}/propose",{path:{chainId:e,safe_address:t},body:n})},t.getConfirmationView=function(e,t,n,a,i,o){return(0,s.postEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/views/transaction-confirmation",{path:{chainId:e,safe_address:t},body:{operation:n,data:a,to:i,value:o}})},t.getTxPreview=function(e,t,n,a,i,o){return(0,s.postEndpoint)(r,"/v1/chains/{chainId}/transactions/{safe_address}/preview",{path:{chainId:e,safe_address:t},body:{operation:n,data:a,to:i,value:o}})},t.getChainsConfig=function(e){return(0,s.getEndpoint)(r,"/v1/chains",{query:e})},t.getChainConfig=function(e){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}",{path:{chainId:e}})},t.getSafeApps=function(e,t={}){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safe-apps",{path:{chainId:e},query:t})},t.getMasterCopies=function(e){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/about/master-copies",{path:{chainId:e}})},t.getDecodedData=function(e,t,n,a){return(0,s.postEndpoint)(r,"/v1/chains/{chainId}/data-decoder",{path:{chainId:e},body:{operation:t,data:n,to:a}})},t.getSafeMessages=function(e,t,n){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:e,safe_address:t},query:{}},n)},t.getSafeMessage=function(e,t){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/messages/{message_hash}",{path:{chainId:e,message_hash:t}})},t.proposeSafeMessage=function(e,t,n){return(0,s.postEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:e,safe_address:t},body:n})},t.confirmSafeMessage=function(e,t,n){return(0,s.postEndpoint)(r,"/v1/chains/{chainId}/messages/{message_hash}/signatures",{path:{chainId:e,message_hash:t},body:n})},t.getDelegates=function(e,t={}){return(0,s.getEndpoint)(r,"/v2/chains/{chainId}/delegates",{path:{chainId:e},query:t})},t.registerDevice=function(e){return(0,s.postEndpoint)(r,"/v1/register/notifications",{body:e})},t.unregisterSafe=function(e,t,n){return(0,s.deleteEndpoint)(r,"/v1/chains/{chainId}/notifications/devices/{uuid}/safes/{safe_address}",{path:{chainId:e,safe_address:t,uuid:n}})},t.unregisterDevice=function(e,t){return(0,s.deleteEndpoint)(r,"/v1/chains/{chainId}/notifications/devices/{uuid}",{path:{chainId:e,uuid:t}})},t.registerEmail=function(e,t,n,a){return(0,s.postEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/emails",{path:{chainId:e,safe_address:t},body:n,headers:a})},t.changeEmail=function(e,t,n,a,i){return(0,s.putEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:e,safe_address:t,signer:n},body:a,headers:i})},t.resendEmailVerificationCode=function(e,t,n){return(0,s.postEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}/verify-resend",{path:{chainId:e,safe_address:t,signer:n},body:""})},t.verifyEmail=function(e,t,n,a){return(0,s.putEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}/verify",{path:{chainId:e,safe_address:t,signer:n},body:a})},t.getRegisteredEmail=function(e,t,n,a){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:e,safe_address:t,signer:n},headers:a})},t.deleteRegisteredEmail=function(e,t,n,a){return(0,s.deleteEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:e,safe_address:t,signer:n},headers:a})},t.registerRecoveryModule=function(e,t,n){return(0,s.postEndpoint)(r,"/v1/chains/{chainId}/safes/{safe_address}/recovery",{path:{chainId:e,safe_address:t},body:n})},t.unsubscribeSingle=function(e){return(0,s.deleteEndpoint)(r,"/v1/subscriptions",{query:e})},t.unsubscribeAll=function(e){return(0,s.deleteEndpoint)(r,"/v1/subscriptions/all",{query:e})},t.getSafeOverviews=function(e,t){return(0,s.getEndpoint)(r,"/v1/safes",{query:Object.assign(Object.assign({},t),{safes:e.join(",")})})},t.getContract=function(e,t){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/contracts/{contractAddress}",{path:{chainId:e,contractAddress:t}})},t.getAuthNonce=function(){return(0,s.getEndpoint)(r,"/v1/auth/nonce",{credentials:"include"})},t.verifyAuth=function(e){return(0,s.postEndpoint)(r,"/v1/auth/verify",{body:e,credentials:"include"})},t.createAccount=function(e){return(0,s.postEndpoint)(r,"/v1/accounts",{body:e,credentials:"include"})},t.getAccount=function(e){return(0,s.getEndpoint)(r,"/v1/accounts/{address}",{path:{address:e},credentials:"include"})},t.deleteAccount=function(e){return(0,s.deleteEndpoint)(r,"/v1/accounts/{address}",{path:{address:e},credentials:"include"})},t.getAccountDataTypes=function(){return(0,s.getEndpoint)(r,"/v1/accounts/data-types")},t.getAccountDataSettings=function(e){return(0,s.getEndpoint)(r,"/v1/accounts/{address}/data-settings",{path:{address:e},credentials:"include"})},t.putAccountDataSettings=function(e,t){return(0,s.putEndpoint)(r,"/v1/accounts/{address}/data-settings",{path:{address:e},body:t,credentials:"include"})},t.getIndexingStatus=function(e){return(0,s.getEndpoint)(r,"/v1/chains/{chainId}/about/indexing",{path:{chainId:e}})};const s=h,i=_;a(m,t),a(C,t),a(Z,t),a(re,t),a(de,t),a(ue,t),a(pe,t),a(ye,t),a(Se,t),a(Ne,t);let r=i.DEFAULT_BASE_URL;t.setBaseUrl=e=>{r=e}}(l);class ve{constructor(e){this.communicator=e}async getBySafeTxHash(e){if(!e)throw new Error("Invalid safeTxHash");return(await this.communicator.send(r.getTxBySafeTxHash,{safeTxHash:e})).data}async signMessage(e){const t={message:e};return(await this.communicator.send(r.signMessage,t)).data}async signTypedMessage(e){if(!u(e))throw new Error("Invalid typed data");return(await this.communicator.send(r.signTypedMessage,{typedData:e})).data}async send({txs:e,params:t}){if(!e||!e.length)throw new Error("No transactions were passed");const n={txs:e,params:t};return(await this.communicator.send(r.sendTransactions,n)).data}}const Oe={eth_call:"eth_call",eth_gasPrice:"eth_gasPrice",eth_getLogs:"eth_getLogs",eth_getBalance:"eth_getBalance",eth_getCode:"eth_getCode",eth_getBlockByHash:"eth_getBlockByHash",eth_getBlockByNumber:"eth_getBlockByNumber",eth_getStorageAt:"eth_getStorageAt",eth_getTransactionByHash:"eth_getTransactionByHash",eth_getTransactionReceipt:"eth_getTransactionReceipt",eth_getTransactionCount:"eth_getTransactionCount",eth_estimateGas:"eth_estimateGas",safe_setSettings:"safe_setSettings"},be={defaultBlockParam:(e="latest")=>e,returnFullTxObjectParam:(e=!1)=>e,blockNumberToHex:e=>Number.isInteger(e)?`0x${e.toString(16)}`:e};class Ce{constructor(e){this.communicator=e,this.call=this.buildRequest({call:Oe.eth_call,formatters:[null,be.defaultBlockParam]}),this.getBalance=this.buildRequest({call:Oe.eth_getBalance,formatters:[null,be.defaultBlockParam]}),this.getCode=this.buildRequest({call:Oe.eth_getCode,formatters:[null,be.defaultBlockParam]}),this.getStorageAt=this.buildRequest({call:Oe.eth_getStorageAt,formatters:[null,be.blockNumberToHex,be.defaultBlockParam]}),this.getPastLogs=this.buildRequest({call:Oe.eth_getLogs}),this.getBlockByHash=this.buildRequest({call:Oe.eth_getBlockByHash,formatters:[null,be.returnFullTxObjectParam]}),this.getBlockByNumber=this.buildRequest({call:Oe.eth_getBlockByNumber,formatters:[be.blockNumberToHex,be.returnFullTxObjectParam]}),this.getTransactionByHash=this.buildRequest({call:Oe.eth_getTransactionByHash}),this.getTransactionReceipt=this.buildRequest({call:Oe.eth_getTransactionReceipt}),this.getTransactionCount=this.buildRequest({call:Oe.eth_getTransactionCount,formatters:[null,be.defaultBlockParam]}),this.getGasPrice=this.buildRequest({call:Oe.eth_gasPrice}),this.getEstimateGas=e=>this.buildRequest({call:Oe.eth_estimateGas})([e]),this.setSafeSettings=this.buildRequest({call:Oe.safe_setSettings})}buildRequest(e){const{call:t,formatters:n}=e;return async e=>{n&&Array.isArray(e)&&n.forEach((t,n)=>{t&&(e[n]=t(e[n]))});const a={call:t,params:e||[]};return(await this.communicator.send(r.rpcCall,a)).data}}}const Re=4001;class De extends Error{constructor(e,t,n){super(e),this.code=t,this.data=n,Object.setPrototypeOf(this,De.prototype)}}class Pe{constructor(e){this.communicator=e}async getPermissions(){return(await this.communicator.send(r.wallet_getPermissions,void 0)).data}async requestPermissions(e){if(!this.isPermissionRequestValid(e))throw new De("Permissions request is invalid",Re);try{return(await this.communicator.send(r.wallet_requestPermissions,e)).data}catch{throw new De("Permissions rejected",Re)}}isPermissionRequestValid(e){return e.every(e=>"object"==typeof e&&Object.keys(e).every(e=>!!Object.values(c).includes(e)))}}const we=(e,t)=>t.some(t=>t.parentCapability===e);class Me{constructor(e){this.communicator=e}async getChainInfo(){return(await this.communicator.send(r.getChainInfo,void 0)).data}async getInfo(){return(await this.communicator.send(r.getSafeInfo,void 0)).data}async experimental_getBalances({currency:e="usd"}={}){return(await this.communicator.send(r.getSafeBalances,{currency:e})).data}async check1271Signature(e,n="0x"){const a=await this.getInfo(),s=t({abi:[{constant:!1,inputs:[{name:"_dataHash",type:"bytes32"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[e,n]}),i={call:Oe.eth_call,params:[{to:a.safeAddress,data:s},"latest"]};try{return"0x1626ba7e"===(await this.communicator.send(r.rpcCall,i)).data.slice(0,10).toLowerCase()}catch(o){return!1}}async check1271SignatureBytes(e,n="0x"){const a=await this.getInfo(),s=t({abi:[{constant:!1,inputs:[{name:"_data",type:"bytes"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[e,n]}),i={call:Oe.eth_call,params:[{to:a.safeAddress,data:s},"latest"]};try{return"0x20c13b0b"===(await this.communicator.send(r.rpcCall,i)).data.slice(0,10).toLowerCase()}catch(o){return!1}}calculateMessageHash(e){return n(e)}calculateTypedMessageHash(e){const t="object"==typeof e.domain.chainId?e.domain.chainId.toNumber():Number(e.domain.chainId);let n=e.primaryType;if(!n){const t=Object.values(e.types),a=Object.keys(e.types).filter(e=>t.every(t=>t.every(({type:t})=>t.replace("[","").replace("]","")!==e)));if(0===a.length||a.length>1)throw new Error("Please specify primaryType");n=a[0]}return a({message:e.message,domain:{...e.domain,chainId:t,verifyingContract:e.domain.verifyingContract,salt:e.domain.salt},types:e.types,primaryType:n})}async getOffChainSignature(e){return(await this.communicator.send(r.getOffChainSignature,e)).data}async isMessageSigned(e,t="0x"){let n;if("string"==typeof e&&(n=async()=>{const n=this.calculateMessageHash(e);return await this.isMessageHashSigned(n,t)}),u(e)&&(n=async()=>{const n=this.calculateTypedMessageHash(e);return await this.isMessageHashSigned(n,t)}),n)return await n();throw new Error("Invalid message type")}async isMessageHashSigned(e,t="0x"){const n=[this.check1271Signature.bind(this),this.check1271SignatureBytes.bind(this)];for(const a of n)if(await a(e,t))return!0;return!1}async getEnvironmentInfo(){return(await this.communicator.send(r.getEnvironmentInfo,void 0)).data}async requestAddressBook(){return(await this.communicator.send(r.requestAddressBook,void 0)).data}}!function(e,t,n,a){var s,i=arguments.length,r=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);i>3&&r&&Object.defineProperty(t,n,r)}([(e,t,n)=>{const a=n.value;return n.value=async function(){const e=new Pe(this.communicator);let n=await e.getPermissions();if(we(t,n)||(n=await e.requestPermissions([{[t]:{}}])),!we(t,n))throw new De("Permissions rejected",Re);return a.apply(this)},n}],Me.prototype,"requestAddressBook",null);const Le=Object.freeze(Object.defineProperty({__proto__:null,MessageFormatter:i,get Methods(){return r},Operation:l.Operation,RPC_CALLS:Oe,get RestrictedMethods(){return c},TokenType:l.TokenType,TransactionStatus:l.TransactionStatus,TransferDirection:l.TransferDirection,default:class{constructor(e={}){const{allowedDomains:t=null,debug:n=!1}=e;this.communicator=new d(t,n),this.eth=new Ce(this.communicator),this.txs=new ve(this.communicator),this.safe=new Me(this.communicator),this.wallet=new Pe(this.communicator)}},getSDKVersion:()=>"9.1.0",isObjectEIP712TypedData:u},Symbol.toStringTag,{value:"Module"}));export{Le as e};
